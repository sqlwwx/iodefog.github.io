<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="iodefog"><title>iOS 模拟出一个半透明的ViewController  presentViewController 实现 · iodefog</title><meta name="description" content="最近项目有需求, 需要模态初一个半透明的视图, 好多人都碰到这个问题吧, 在目标视图中设置背景颜色然后发现模态动作结束后变成了黑色或者不是半透明的颜色。所以今天来告诉大家解决方案
- (IBAction)Avtion1:(id)sender {

    TestViewController * t"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/./images/logo.png" style="width:127px;"><h3 title=""><a href="/">iodefog</a></h3><div class="description"><p>记录人生道路景色的，点点滴滴。</p></div></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/about">关于</a></li><li><a href="/links">链接</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>iOS 模拟出一个半透明的ViewController  presentViewController 实现</a></h3></div><div class="post-content"><p>最近项目有需求, 需要模态初一个半透明的视图, 好多人都碰到这个问题吧, 在目标视图中设置背景颜色然后发现模态动作结束后变成了黑色或者不是半透明的颜色。<br>所以今天来告诉大家解决方案</p>
<pre><code>- (IBAction)Avtion1:(id)sender {

    TestViewController * testVC = [TestViewController new];

    self.definesPresentationContext = YES; //self is presenting view controller
    testVC.view.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:.4];
    testVC.modalPresentationStyle = UIModalPresentationOverCurrentContext;

    [self presentViewController:testVC animated:YES completion:nil];
}
</code></pre><ul>
<li>注意：如果present 一个NavController，不能完全使用上面代码。</li>
</ul>
<a id="more"></a>
<ul>
<li><p>(IBAction)pushSecond:(id)sender{<br>  SecondViewController * testVC = [SecondViewControllernew];</p>
<p>  self.definesPresentationContext = YES; //self is presenting view controller<br>  testVC.view.backgroundColor = [UIColorcolorWithRed:0green:0blue:0alpha:.5];<br>//    testVC.modalPresentationStyle = UIModalPresentationOverCurrentContext;<br>  UINavigationController *nav = [[UINavigationControlleralloc] initWithRootViewController:testVC];<br>  nav.modalPresentationStyle = UIModalPresentationOverCurrentContext;<br>  nav.view.backgroundColor = [UIColorclearColor];<br>  [selfpresentViewController:nav animated:YEScompletion:nil];<br>}</p>
</li>
</ul>
<ul>
<li><p>definesPresentationContext</p>
<p>  /*</p>
<pre><code>Determines which parent view controller&apos;s view should be presented over for presentations of type
UIModalPresentationCurrentContext.  If no ancestor view controller has this flag set, then the presenter
will be the root view controller.
</code></pre><p>  */</p>
</li>
<li><p>backgroundColor</p>
<p>  设置你的背景颜色</p>
</li>
<li><p>modalPresentationStyle</p>
<p>  /*</p>
<pre><code>Defines the transition style that will be used for this view controller when it is presented modally. Set
this property on the view controller to be presented, not the presenter.  Defaults to
UIModalTransitionStyleCoverVertical.
</code></pre><p>  */</p>
</li>
</ul>
<p>Demo 如下 ：<br><a href="https://github.com/iodefog/PreDemo" target="_blank" rel="noopener">https://github.com/iodefog/PreDemo</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2015-05-26</span><i class="fa fa-tag"></i><a href="/categories/技术/" title="技术" class="tag">技术 </a></div></div></div></div><div class="pagination"><ul class="clearfix"></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>